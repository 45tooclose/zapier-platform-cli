<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zapier Platform CLI Documentation</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/agate.min.css">
    <style>body {
  font-family: 'Open Sans', Helvetica, arial, sans-serif;
  background-color: #fff;
  color: #5F6C72;
  font-size: 14px;
  font-weight: 400;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  position: relative; }

img {
  max-width: 100%; }

h1 {
  color: #354147;
  font-size: 28px;
  font-weight: 400;
  line-height: 1.3em;
  padding: 20px 0; }

h2 {
  color: #354147;
  font-size: 20px;
  line-height: 1.4em;
  font-weight: 600;
  padding: 1em 0; }

h3 {
  color: #354147;
  font-size: 15px;
  line-height: 1.5em;
  font-weight: 600;
  padding: 0 0 0.5em 0; }

h4 {
  color: #354147;
  font-size: 0.9em;
  letter-spacing: 1px;
  line-height: 1.2em;
  font-weight: 600;
  padding: 0 0 10px;
  text-transform: uppercase; }

a {
  color: #499DF3;
  text-decoration: none; }
  a:hover {
    text-decoration: underline; }

::-webkit-input-placeholder {
  color: #969EA2; }

:-moz-placeholder {
  color: #969EA2; }

::-moz-placeholder {
  color: #969EA2; }

:-ms-input-placeholder {
  color: #969EA2; }

p {
  line-height: 1.6em;
  margin: 0 0 15px; }

small {
  font-size: 13px; }

i, em {
  font-style: italic; }

strong {
  font-weight: 600; }

sup, sub, .sup {
  font-size: 13px;
  vertical-align: baseline;
  position: relative;
  top: -0.4em; }
  sup.small, sub.small, .sup.small {
    font-size: 10px; }

sub {
  top: 0.4em; }

pre {
  border: none;
  line-height: 20px;
  font-family: 'Consolas','Liberation Mono',Courier,monospace; }
  pre code {
    display: block;
    white-space: pre; /* no word wrap */
    padding: 10px;
    line-height: 1.7em; }

p code {
  word-break: break-all;
  display: inline; }

hr {
  color: #DADFE2;
  background: #DADFE2;
  border: 0;
  height: 1px; }

ul {
  line-height: 1.75em;
  margin: 0 0 20px; }

ol {
  line-height: 1.75em;
  list-style-type: decimal;
  list-style-position: inside;
  margin: 0 0 20px; }

blockquote {
  border-left: 3px solid #ff4a00;
  font-size: 14px;
  font-style: italic;
  line-height: 2em;
  margin: 30px 0;
  padding-left: 20px; }
  blockquote p {
    font-size: inherit;
    font-style: inherit;
    line-height: inherit; }

.docs-toc {
  height: 100%;
  width: 230px;
  position: fixed;
  padding: 40px 20px; }
  .docs-toc ul {
    list-style-type: none;
    margin: 0; 
    padding: 0; }
    .docs-toc ul ul {
      padding-left: 10px; }

.generated-by {
  font-size: 12px;
  color: #969EA2; }

.docs-main {}

.docs-code {
  /* see media queries */ }
  .docs-code pre {
    background: #354147;
    color: #ffffff;
    line-height: 20px;
    font-family: 'Consolas','Liberation Mono',Courier,monospace; }
    .docs-code pre code {
      display: block;
      padding: 10px;
      line-height: 1.7em; }


/* targets bootstraps md width */

@media (min-width: 992px) {
  .row-height {
    display: table;
    table-layout: fixed;
    height: 100%;
    width: 100%; }
  .col-height {
    display: table-cell;
    float: none;
    height: 100%; }

  .docs-main {
    margin-left: 230px; }

  .docs-code {
    background: #5F6C72;
    color: #ffffff; }
}

@media (max-width: 992px) {
  .docs-toc {
    display: none; }
  .is-empty {
    display: none; }
}
</style>
  </head>
  <body>
    <div class="docs-toc">
      <ul>
<li><a href="#quickstart">Quickstart</a></li>
<li><a href="#creating-an-app">Creating an App</a><ul>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#app-definition">App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearcheswrites">Triggers/Searches/Writes</a></li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#log-statements">Log Statements</a></li>
<li><a href="#viewing-logs">Viewing Logs</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
</ul>
</li>
<li><a href="#example-apps">Example Apps</a></li>
</ul>

      <hr />
      <small><a class="generated-by" href="https://github.com/zapier/litdoc">generated by litdoc</a></small>
    </div>

    <div class="docs-main container-fluid">
      <div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h1 id="zapier-platform-cli">Zapier Platform CLI</h1>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier is a platform for creating integrations and workflows. This CLI is your gateway to creating custom applications on the Zapier platform.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="table-of-contents">Table of Contents</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><a href="#quickstart">Quickstart</a></li>
<li><a href="#creating-an-app">Creating an App</a><ul>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#app-definition">App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearcheswrites">Triggers/Searches/Writes</a></li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#log-statements">Log Statements</a></li>
<li><a href="#viewing-logs">Viewing Logs</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
</ul>
</li>
<li><a href="#example-apps">Example Apps</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="quickstart">Quickstart</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>The Zapier CLI and Platform requires Node <code>v4.3.2</code> or higher. We recommend using <a href="https://github.com/creationix/nvm">nvm</a> and <a href="http://brew.sh/">homebrew</a> to manage your Node installation.</p>
</blockquote><p>First up is installing the CLI and setting up your auth to create a working &quot;Zapier Example&quot; application. It will be private to you and visible in your live <a href="https://zapier.com/app/editor">Zapier editor</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># install the CLI globally</span>
npm install -g @zapier/zapier-platform-cli

<span class="hljs-comment"># print all the commands</span>
zapier <span class="hljs-built_in">help</span>

<span class="hljs-comment"># auth to Zapier&apos;s platform with your deploy key. To obtain a key, email partner@zapier.com</span>
zapier auth
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your Zapier CLI should be installed and ready to go at this point. Next up, we&apos;ll create our first app!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># make your folder</span>
mkdir zapier-example
<span class="hljs-built_in">cd</span> zapier-example

<span class="hljs-comment"># create the needed files from a template</span>
zapier init --template=trigger

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: there are plenty of templates &amp; example apps to choose from! <a href="#example-apps">View all Example Apps here.</a></p>
</blockquote><p>You should now have a working local app. You can run several local commands to try it out.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># validate the app</span>
zapier validate

<span class="hljs-comment"># describe the app</span>
zapier describe

<span class="hljs-comment"># run the local tests</span>
<span class="hljs-comment"># the same as npm test</span>
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next, you&apos;ll probably want to register your app and upload your version to Zapier itself so you can start testing live.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># register your app</span>
zapier register <span class="hljs-string">&quot;Zapier Example&quot;</span>

<span class="hljs-comment"># list your apps</span>
zapier apps

<span class="hljs-comment"># deploy your app version to Zapier</span>
zapier deploy

<span class="hljs-comment"># list your versions</span>
zapier versions
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you open the editor in Zapier, you should now see &quot;Zapier Example (1.0.0)&quot; listed and usable! We recommend using our built in <code>watch</code> command to iterate on the app.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># watch and sync up your local app to zapier</span>
zapier watch

<span class="hljs-comment"># now make changes locally, and see them reflected live in Zapier</span>
<span class="hljs-comment"># method calls will also be proxied and logged to stdout for convenience</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Don&apos;t forget you&apos;ll need to <code>zapier deploy</code> to make your changes stick after any <code>zapier watch</code> session!</p><blockquote>
<p>Go check out our <a href="docs/cli.md">full CLI reference documentation</a> to see all the other commands!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="creating-an-app">Creating an App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: check the <a href="#quickstart">Quickstart</a> if this is your first time using the platform!</p>
</blockquote><p>Creating an App can be done entirely locally and they are fairly simple Node.js apps using the standard Node environment and should be completely testable. However, a local app stays local until you <code>zapier register</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># make your folder</span>
mkdir zapier-example
<span class="hljs-built_in">cd</span> zapier-example

<span class="hljs-comment"># create the needed files from a template</span>
zapier init --template=trigger

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>local App</strong>, use these commands:</p><ul>
<li><code>zapier init --template=resource</code> - initialize/start a local app project</li>
<li><code>zapier scaffold resource Contact</code> - auto-injects a new resource, trigger, etc.</li>
<li><code>zapier test</code> - run the same tests as <code>npm test</code></li>
<li><code>zapier validate</code> - ensure your app is valid</li>
<li><code>zapier describe</code> - print some helpful information about your app</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="project-structure">Project Structure</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In your app&apos;s folder, you should see this general recommended structure. The <code>index.js</code> is Zapier&apos;s entry point to your app. Zapier expects you to export an <code>App</code> definition there.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-plain">$ tree .
.
&#x251C;&#x2500;&#x2500; README.md
&#x251C;&#x2500;&#x2500; index.js
&#x251C;&#x2500;&#x2500; package.json
&#x251C;&#x2500;&#x2500; triggers
&#x2502;   &#x2514;&#x2500;&#x2500; contact-by-tag.js
&#x251C;&#x2500;&#x2500; resources
&#x2502;   &#x2514;&#x2500;&#x2500; Contact.js
&#x251C;&#x2500;&#x2500; test
&#x2502;   &#x251C;&#x2500;&#x2500; basic.js
&#x2502;   &#x251C;&#x2500;&#x2500; triggers.js
&#x2502;   &#x2514;&#x2500;&#x2500; resources.js
&#x251C;&#x2500;&#x2500; build
&#x2502;   &#x2514;&#x2500;&#x2500; build.zip
&#x2514;&#x2500;&#x2500; node_modules
    &#x251C;&#x2500;&#x2500; ...
    &#x2514;&#x2500;&#x2500; ...
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="app-definition">App Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The core definition of your <code>App</code> will look something like this, and is what your <code>index.js</code> should provide as the <em>only</em> export:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// both version strings are required</span>
  version: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  platformVersion: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@zapier/zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// see &quot;Authentication&quot; section below</span>
  authentication: {
  },

  <span class="hljs-comment">// see &quot;Making HTTP Requests&quot; section below</span>
  requestTemplate: {
  },
  beforeRequest: [
  ],
  afterResponse: [
  ],

  <span class="hljs-comment">// See &quot;Resources&quot; section below</span>
  resources: {
  },

  <span class="hljs-comment">// See &quot;Triggers/Searches/Writes&quot; section below</span>
  triggers: {
  },
  searches: {
  },
  writes: {
  }
};

<span class="hljs-built_in">module</span>.export = App;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: you can use higher order functions to create any part of your App definition!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="registering-an-app">Registering an App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Registering your App with Zapier will enable much of the functionality within Zapier.com. It is a necessary step before deploying an App Version which exposes the app in the Zapier interface.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># register your app</span>
zapier register <span class="hljs-string">&quot;Zapier Example&quot;</span>

<span class="hljs-comment"># list your apps</span>
zapier apps
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>App</strong>, use these commands:</p><ul>
<li><code>zapier apps</code> - list the apps in Zapier you can administer</li>
<li><code>zapier register &quot;Name&quot;</code> - creates a new app in Zapier</li>
<li><code>zapier link</code> - lists and links a selected app in Zapier to your current folder</li>
<li><code>zapier history</code> - print the history of your app</li>
<li><code>zapier collaborate [user@example.com]</code> - add admins to your app who can deploy</li>
<li><code>zapier invite [user@example.com]</code> - add users to try your app before promotion</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="deploying-an-app-version">Deploying an App Version</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>An App Version is related to a specific App but is an &quot;immutable&quot; implementation of your app. This makes it easy to run multiple versions for multiple users concurrently. By default, every App Version is private but you can &quot;promote&quot; it to production for use by over 1 million Zapier users.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># deploy your app version to Zapier</span>
zapier deploy

<span class="hljs-comment"># list your versions</span>
zapier versions

<span class="hljs-comment"># watch and sync up your local app to zapier</span>
zapier watch

<span class="hljs-comment"># now make changes locally, and see them reflected live in Zapier</span>
<span class="hljs-comment"># method calls will also be proxied and logged to stdout for convenience</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>Version</strong>, use these commands:</p><ul>
<li><code>zapier versions</code> - list the versions for the current directory&apos;s app</li>
<li><code>zapier deploy</code> - deploy the current version the of current directory&apos;s app &amp; version (read from <code>package.json</code>)</li>
<li><code>zapier promote [1.0.0]</code> - mark a version as the &quot;production&quot; version</li>
<li><code>zapier migrate [1.0.0] [1.0.1] [100%]</code> - move users between versions, regardless of deployment status</li>
<li><code>zapier deprecate [1.0.0] [YYYY-MM-DD]</code> - mark a version as deprecated, but let users continue to use it (we&apos;ll email them)</li>
<li><code>zapier env 1.0.0 [KEY] [value]</code> - set an environment variable to some value</li>
<li><code>zapier watch</code> - continuously sync your app to the Zapier interface, creating a fast feedback loop</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="authentication">Authentication</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most applications require some sort of authentication - and Zapier provides a handful of methods for helping your users authenticate with your application. Zapier will provide some of the core behaviors, but you&apos;ll likely need to handle the rest.</p><blockquote>
<p>Hint: You can access the data tied to your authentication via the <code>bundle.authData</code> property in any method called in your app.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="basic">Basic</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Useful if your app requires two pieces of information to authentication: <code>username</code> and <code>password</code> which only the end user can provide. By default, Zapier will do the standard Basic authentication base64 header encoding for you (via an automatically registered middleware).</p><blockquote>
<p>Note: if you do the common <code>Authorization: Basic apikey:x</code> you should look at the &quot;Custom&quot; authentication method instead.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: {
    type: <span class="hljs-string">&apos;basic&apos;</span>,
    <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
    test: {
      url: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
    }
    <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
  },
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="custom">Custom</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is what most &quot;API Key&quot; driven apps should default to using. You&apos;ll likely provide some some custom <code>beforeRequest</code> middleware or a <code>requestTemplate</code> to complete the authentication by adding/computing needed headers.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: {
    type: <span class="hljs-string">&apos;custom&apos;</span>,
    <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
    test: {
      url: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>
    },
    fields: [
      {key: <span class="hljs-string">&apos;subdomain&apos;</span>, type: <span class="hljs-string">&apos;string&apos;</span>, required: <span class="hljs-literal">true</span>, helpText: <span class="hljs-string">&apos;Found in your browsers address bar after logging in.&apos;</span>},
      {key: <span class="hljs-string">&apos;api_key&apos;</span>, type: <span class="hljs-string">&apos;string&apos;</span>, required: <span class="hljs-literal">true</span>, helpText: <span class="hljs-string">&apos;Found on your settings page.&apos;</span>}
    ]
  },
  beforeRequest: [
    (request, z, bundle) =&gt; {
      request.headers[<span class="hljs-string">&apos;X-Api-Key&apos;</span>] = bundle.authData.api_key;
      <span class="hljs-keyword">return</span> request;
    }
  ]
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="digest">Digest</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Very similar to the &quot;Basic&quot; authentication method above, but uses digest authentication instead of Basic authentication.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: {
    type: <span class="hljs-string">&apos;digest&apos;</span>,
    <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
    test: {
      url: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
    }
    <span class="hljs-comment">// you can provide additional fields, but Zapier will provide `username`/`password` automatically</span>
  },
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="session">Session</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>TODO.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2">OAuth2</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier will handle most of the logic around the 3 step OAuth flow, but you&apos;ll be required to define how the steps work on your own. You&apos;ll also likely want to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env 1.0.0 CLIENT_ID 1234
$ zapier env 1.0.0 CLIENT_SECRET abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: {
    type: <span class="hljs-string">&apos;oauth2&apos;</span>,
    test: {
      url: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
    },
    <span class="hljs-comment">// you can provide additional fields for inclusion in authData</span>
    oauth2Config: {
      <span class="hljs-comment">// &quot;authorizeUrl&quot; could also be a function returning a string url</span>
      authorizeUrl: {
        method: <span class="hljs-string">&apos;GET&apos;</span>,
        url: <span class="hljs-string">&apos;https://example.com/api/oauth2/authorize&apos;</span>,
        params: {
          client_id: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
          state: <span class="hljs-string">&apos;{{bundle.inputData.state}}&apos;</span>,
          redirect_uri: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
          response_type: <span class="hljs-string">&apos;code&apos;</span>
        }
      },
      <span class="hljs-comment">// Zapier expects a response providing {access_token: &apos;abcd&apos;}</span>
      <span class="hljs-comment">// &quot;getAccessToken&quot; could also be a function returning an object</span>
      getAccessToken: {
        method: <span class="hljs-string">&apos;POST&apos;</span>,
        url: <span class="hljs-string">&apos;https://example.com/api/v2/oauth2/token&apos;</span>,
        body: {
          code: <span class="hljs-string">&apos;{{bundle.inputData.code}}&apos;</span>,
          client_id: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
          client_secret: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
          redirect_uri: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
          grant_type: <span class="hljs-string">&apos;authorization_code&apos;</span>
        },
        headers: {
          <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>
        }
      }
    }
  },
  beforeRequest: [
    (request, z, bundle) =&gt; {
      request.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${bundle.authData.access_token}</span>`</span>;
      <span class="hljs-keyword">return</span> request;
    }
  ]
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="resources">Resources</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>resource</code> is a representation (as a JavaScript object) of one of the REST resources of your API. Say you have a <code>/recipes</code>
endpoint for working with recipes; you can define a recipe resource in your app that will tell Zapier how to do create,
read, and search operations on that resource.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">// `key` is the unique identifier the Zapier backend references</span>
  key: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// `noun` is the user-friendly name displayed in the Zapier UI</span>
  noun: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-comment">// `list` and `create` are just a couple of the methods you can define</span>
  list: {
      <span class="hljs-comment">//...</span>
  },
  create: {
      <span class="hljs-comment">//...</span>
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The quickest way to create a resource is with the <code>zapier scaffold</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier scaffold resource <span class="hljs-string">&quot;Recipe&quot;</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This will generate the resource file and add the necessary statements to the <code>index.js</code> file to import it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="resource-definition">Resource Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A resource has a few basic properties. The first is the <code>key</code>, which allows Zapier to identify the resource on our backend.
The second is the <code>noun</code>, the user-friendly name of the resource that is presented to users throughout the Zapier UI.</p><p>After those, there is a set of optional properties that tell Zapier what methods can be performed on the resource.
The complete list of available methods can be found in the <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#resourceschema">Resource Schema Docs</a>.
For now, let&apos;s focus on two:</p><ul>
<li><code>list</code> - Tells Zapier how to fetch a set of this resource. This becomes a Trigger in the Zapier Editor.</li>
<li><code>create</code> - Tells Zapier how to create a new instance of the resource. This becomes an Action in the Zapier Editor.</li>
</ul><p>Here is a complete example of what the list method might look like</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">//...</span>
  list: {
    display: {
      label: <span class="hljs-string">&apos;New Recipe&apos;</span>,
      description: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
    },
    operation: {
      perform: {
        url: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The method is made up of two properties, a <code>display</code> and an <code>operation</code>. The <code>display</code> property (<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#basicdisplayschema">schema</a>) holds the info needed to present the method as an available Trigger in the Zapier Editor. The <code>operation</code> (<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#resourceschema">schema</a>) provides the implementation to make the API call.</p><p>Adding a create method looks very similar.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">//...</span>
  list: {
    <span class="hljs-comment">//...</span>
  },
  create: {
    display: {
      label: <span class="hljs-string">&apos;Add Recipe&apos;</span>,
      description: <span class="hljs-string">&apos;Adds a new recipe to our cookbook.&apos;</span>
    },
    operation: {
      perform: {
        url: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>,
        method: <span class="hljs-string">&apos;POST&apos;</span>,
        body: {
          name: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
          style: <span class="hljs-string">&apos;mediterranean&apos;</span>
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Every method you define on a <code>resource</code> Zapier converts to the appropriate Trigger, Write, or Search. Our examples
above would result in an app with a New Recipe Trigger and an Add Recipe Write.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="triggers-searches-writes">Triggers/Searches/Writes</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Triggers, Searches, and Writes are the way an app defines what it is able to do. Triggers read
data into Zapier (i.e. watch for new recipes). Searches locate individual records (find recipe by title). Writes create
new records in your system (add a recipe to the catalog).</p><p>The definition for each of these follows the same structure. Here is an example of a trigger:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">//...</span>
  triggers: {
    new_recipe: {
      <span class="hljs-comment">// `key` uniquely identifies the trigger to the Zapier backend</span>
      key: <span class="hljs-string">&apos;new_recipe&apos;</span>,
      <span class="hljs-comment">// `noun` is the user-friendly word that is used to refer to the resource this trigger relates to</span>
      noun: <span class="hljs-string">&apos;Recipe&apos;</span>,
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      display: {
        label: <span class="hljs-string">&apos;New Recipe&apos;</span>,
        helpText: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
      },
      <span class="hljs-comment">// `operation` implements the API call used to fetch the data</span>
      operation: {
        url: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>,
      }
    },
    another_trigger: {
      <span class="hljs-comment">// Another trigger definition...</span>
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the definition for each by looking at the <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#triggerschema">Trigger Schema</a>,
<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#searchschema">Search Schema</a>, and <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#writeschema">Write Schema</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="making-http-requests">Making HTTP Requests</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two primary ways to make HTTP requests in the Zapier platform:</p><ol>
<li><strong>Shorthand HTTP Requests</strong> - these are simple object literals that make it easy to define simple requests.</li>
<li><strong>Manual HTTP Requests</strong> - this is much less &quot;magic&quot;, you use <code>z.request()</code> to make the requests and control the response.</li>
</ol><p>There are also a few helper constructs you can use to reduce boilerplate:</p><ol>
<li><code>requestTemplate</code> which is an shorthand HTTP request that will be merged with every request.</li>
<li><code>beforeRequest</code> middleware which is an array of functions to mutate a request before it is sent.</li>
<li><code>afterResponse</code> middleware which is an array of functions to mutate a response before it is completed.</li>
</ol>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="shorthand-http-requests">Shorthand HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For simple HTTP requests that do not require special pre or post processing, you can specify the HTTP options as an object literal in your app definition.</p><p>This features:</p><ol>
<li>Lazy <code>{{curly}}</code> replacement.</li>
<li>JSON de-serialization.</li>
<li>Automatic non-2xx error raising.</li>
</ol>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    example: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: {
          method: <span class="hljs-string">&apos;GET&apos;</span>,
          url: <span class="hljs-string">&apos;http://{{bundle.authData.subdomain}}.example.com/v2/api/recipes.json&apos;</span>,
          params: {
            sort_by: <span class="hljs-string">&apos;id&apos;</span>,
            sort_order: <span class="hljs-string">&apos;DESC&apos;</span>
          }
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In the url above, <code>{{bundle.authData.subdomain}}</code> is automatically replaced with the live value from the bundle. If the call returns a non 2xx return code, an error is automatically raised. The response body is automatically parsed as JSON and returned.</p><p>An error will be raised if the response is not valid JSON, so <em>do not use shorthand HTTP requests with non-JSON responses</em>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="manual-http-requests">Manual HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When you need to do custom processing of the response, or need to process non-JSON responses, you can make manual HTTP requests. This approach does not perform any magic - no <code>{{curly}}</code> replacement, no status code checking, no automatic JSON parsing. Use this method when you need more control.</p><p>To make a manual HTTP request, use the <code>request</code> method of the <code>z</code> object:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    example: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: (z, bundle) =&gt; {
          <span class="hljs-keyword">const</span> customHttpOptions = {
            headers: {
              <span class="hljs-string">&apos;my-header&apos;</span>: <span class="hljs-string">&apos;from zapier&apos;</span>
            }
          };

          <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, customHttpOptions)
            .then(response =&gt; {
              <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">300</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
              }

              <span class="hljs-keyword">const</span> recipes = <span class="hljs-built_in">JSON</span>.parse(response.content);
              <span class="hljs-comment">// do any custom processing of recipes here...</span>

              <span class="hljs-keyword">return</span> recipes;
            });
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="post-and-put-requests">POST and PUT Requests</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To POST or PUT data to your API you can do this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    example: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: (z, bundle) =&gt; {
          <span class="hljs-keyword">const</span> recipe = {
            name: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
            style: <span class="hljs-string">&apos;mediterranean&apos;</span>,
            directions: <span class="hljs-string">&apos;Get some dough....&apos;</span>
          };

          <span class="hljs-keyword">const</span> options = {
            method: <span class="hljs-string">&apos;POST&apos;</span>,
            body: <span class="hljs-built_in">JSON</span>.stringify(recipe)
          };

          <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, options)
            .then(response =&gt; {
              <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">201</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
              }
            });
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Note that you need to call <code>JSON.stringify()</code> before setting the <code>body</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="using-http-middleware">Using HTTP middleware</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you need to process all HTTP requests in a certain way, you may be able to use one of utility HTTP middleware functions, by putting them in your app definition:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  beforeRequest: [
    (request) =&gt; {
      request.headers[<span class="hljs-string">&apos;my-header&apos;</span>] = <span class="hljs-string">&apos;from zapier&apos;</span>;
      <span class="hljs-keyword">return</span> request;
    }
  ],
  afterRequest: [
    (response) =&gt; {
      <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">200</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
      }
      <span class="hljs-keyword">return</span> response;
    },
    (response) =&gt; {
      response.json = <span class="hljs-built_in">JSON</span>.parse(response.content);
      <span class="hljs-keyword">return</span> response;
    }
  ]
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>beforeRequest</code> middleware function takes a request options object, and returns a (possibly mutated) request object. An <code>afterResponse</code> middleware function takes a response object, and returns a (possibly mutated) response object. Middleware functions are executed in the order specified in the app definition, and each subsequent middleware receives the request or response object returned by the previous middleware.</p><p>Middleware functions can be asynchronous - just return a promise from the middleware function.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-request-options">HTTP Request Options</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Shorthand requests and manual <code>z.request()</code> calls support the following HTTP options:</p><ul>
<li><code>method</code>: HTTP method, default is <code>GET</code>.</li>
<li><code>headers</code>: request headers object, format <code>{&apos;header-key&apos;: &apos;header-value&apos;}</code>.</li>
<li><code>params</code>: URL query params object, format <code>{&apos;query-key&apos;: &apos;query-value&apos;}</code>.</li>
<li><code>body</code>: request body, can be a string, buffer, or readable stream.</li>
<li><code>redirect</code>: set to <code>manual</code> to extract redirect headers, <code>error</code> to reject redirect, default is <code>follow</code>.</li>
<li><code>follow</code>: maximum redirect count, set to <code>0</code> to not follow redirects. default is <code>20</code>.</li>
<li><code>compress</code>: support gzip/deflate content encoding. Set to <code>false</code> to disable. Default is <code>true</code>.</li>
<li><code>agent</code>: Node.js <code>http.Agent</code> instance, allows custom proxy, certificate etc. Default is <code>null</code>.</li>
<li><code>timeout</code>: request / response timeout in ms. Set to <code>0</code> to disable (OS limit still applies), timeout reset on <code>redirect</code>. Default is <code>0</code> (disabled).</li>
<li><code>size</code>: maximum response body size in bytes. Set to <code>0`` to disable. Defalut is</code>0` (disabled).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-response-object">HTTP Response Object</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The response object returned by <code>z.request()</code> supports the following fields and methods:</p><ul>
<li><code>status</code>: The response status code, i.e. <code>200</code>, <code>404</code>, etc.</li>
<li><code>content</code>: The raw response body. For JSON you need to call <code>JSON.parse(response.content)</code>.</li>
<li><code>headers</code>: Response headers object. The header keys are all lower case.</li>
<li><code>getHeader</code>: Retrieve response header, case insensitive: <code>response.getHeader(&apos;My-Header&apos;)</code></li>
<li><code>options</code>: The original request options object (see above).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="environment">Environment</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Apps can define environment varialbes that are available when the app&apos;s code executes. They work just like environment
variables defined on the command line. They are useful when you have data like an OAuth client ID and secret that you
don&apos;t want to commit to source control. Environment variables can also be used as a quick way to toggle between a
a staging and production environment during app development.</p><p>It is important to note that <strong>variables are defined on a per-version basis!</strong> When you deploy a new version, the
existing variables from the previous version are copied, so you don&apos;t have to manually add them. However, edits
made to one version&apos;s environment will not affect the other versions.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="defining-environment-variables">Defining Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an environment variable, use the <code>env</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will set the environment variable on Zapier.com</span>
zapier env 1.0.0 MY_SECRET_VALUE 1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will likely also want to set the value locally for testing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="accessing-environment-variables">Accessing Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view existing environment variables, use the <code>env</code> command.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will print a table listing the variables for this version</span>
zapier env 1.0.0
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Within your app, you can access the environment via the standard <code>process.env</code> - any values set via local <code>export</code> or <code>zapier env</code> will be there.</p><p>For example, you can access the <code>process.env</code> in your perform functions:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    example: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: (z, bundle) =&gt; {
          <span class="hljs-keyword">const</span> httpOptions = {
            headers: {
              <span class="hljs-string">&apos;my-header&apos;</span>: process.env.MY_SECRET_VALUE
            }
          };
          <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, httpOptions);
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="logging">Logging</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="log-statements">Log Statements</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To manually print a log statement in your code, use <code>z.console</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">  z.console.log(<span class="hljs-string">&apos;Here are the input fields&apos;</span>, bundle.inputData);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.console</code> object has all the same methods and works just like the Node.js <a href="https://nodejs.org/dist/latest-v4.x/docs/api/console.html"><code>Console</code></a> class - the only difference is we&apos;ll log to our distrubuted datastore and you can view them via <code>zapier logs</code> (more below).</p><p>Zapier automatically logs all HTTP requests (as long as you use <code>z.request()</code> or shorthand request objects).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-logs">Viewing Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view the logs for your application, use the <code>zapier logs</code> command. There are two types of logs, <code>http</code> (logged automatically by Zapier on HTTP requests) and <code>console</code> (manual logs via <code>z.console.log()</code> statements). To see the HTTP logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier logs --type=http
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see detailed http logs including headers, request and response bodies, etc, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier logs --type=http --detailed
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see your <code>z.console</code> logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier logs --type=console
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For more advanced logging options including only displaying the logs for a certain user or app version, look at the help for the logs command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier help logs
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="testing">Testing</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can write unit tests for your Zapier app that run locally, outside of the zapier editor.
You can run these tests in a CI tool like <a href="https://travis-ci.com/">Travis</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="writing-unit-tests">Writing Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We recommend using the <a href="https://mochajs.org/">Mocha</a> testing framework. After running
<code>zapier init</code> you should find an example test to start from in the <code>test</code> directory.</p><p>To</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-comment">// we use should assertions</span>
<span class="hljs-keyword">const</span> should = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);
<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@zapier/zapier-platform-core&apos;</span>);

<span class="hljs-comment">// createAppTester() makes it easier to test your app. It takes your</span>
<span class="hljs-comment">// raw app definition, and returns a function that will test you app.</span>
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>));

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {

  describe(<span class="hljs-string">&apos;new recipe trigger&apos;</span>, () =&gt; {
    it(<span class="hljs-string">&apos;should load recipes&apos;</span>, (done) =&gt; {
      <span class="hljs-comment">// This is what Zapier will send to your app as input.</span>
      <span class="hljs-comment">// It contains trigger options the user choice in their zap.</span>
      <span class="hljs-keyword">const</span> bundle = {
        inputData: {
          style: <span class="hljs-string">&apos;mediterranean&apos;</span>
        }
      };

      <span class="hljs-comment">// Pass appTester the path to the trigger you want to call,</span>
      <span class="hljs-comment">// and the input bundle. appTester returns a promise for results.</span>
      appTester(<span class="hljs-string">&apos;triggers.recipe&apos;</span>, bundle)
        .then(results =&gt; {
          <span class="hljs-comment">// Make assertions</span>

          results.length.should.eql(<span class="hljs-number">10</span>);

          <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
          firstRecipe.name.should.eql(<span class="hljs-string">&apos;Baked Falafel&apos;</span>);

          done();
        })
        .catch(done);
    });
  });

});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="running-unit-tests">Running Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To run all your tests do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier test
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When running a unit test via <code>zapier test</code>, <code>z.console</code> statements print to <code>stdout</code>. To see the HTTP logs when running tests do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier test --log-to-stdout
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To also see the detailed HTTP logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>zapier test --log-to-stdout --detailed-log-to-stdout
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="example-apps">Example Apps</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Check out the following example applications to help you get started:</p><ul>
<li><a href="https://github.com/zapier/zapier-platform-example-app-resource">Resource Example</a> - <code>zapier init --template=resource</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-trigger">Trigger Example</a> - <code>zapier init --template=trigger</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-search">Search Example</a> - <code>zapier init --template=search</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-write">Write Example</a> - <code>zapier init --template=write</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-middleware">Middleware Example</a> - <code>zapier init --template=middleware</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-basic-auth">Basic Auth Example</a> - <code>zapier init --template=basic-auth</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-custom-auth">Custom Auth Example</a> - <code>zapier init --template=custom-auth</code></li>
<li><a href="https://github.com/zapier/zapier-platform-example-app-oauth2">OAuth2 Example</a> - <code>zapier init --template=oauth2</code></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div>
    </div>
  </body>
</html>
